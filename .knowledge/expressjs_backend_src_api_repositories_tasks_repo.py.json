{"is_source_file": true, "format": "Python", "description": "This file contains repository classes and functions for managing 'Task' objects, supporting both in-memory and MongoDB storage backends. It includes methods for CRUD operations, indexing, and helper functions related to tasks.", "external_files": ["src.api.models.tasks"], "external_methods": ["fastapi.HTTPException", "fastapi.status", "motor.motor_asyncio.AsyncIOMotorDatabase"], "published": ["get_tasks_store"], "classes": [{"name": "InMemoryTasksStore", "description": "In-memory storage backend for tasks, used as fallback when MongoDB isn't configured."}, {"name": "MongoTasksStore", "description": "MongoDB-backed storage backend for tasks, with methods for CRUD operations and index management."}], "methods": [{"name": "datetime _now_utc()", "description": "Returns the current UTC datetime.", "scope": "", "scopeKind": ""}, {"name": "TaskOut _serialize_task(doc: Dict[str, Any])", "description": "Serializes a MongoDB document or dict into a TaskOut object.", "scope": "", "scopeKind": ""}, {"name": "InMemoryTasksStore|MongoTasksStore get_tasks_store(db: Optional[AsyncIOMotorDatabase])", "description": "Factory function that returns either an in-memory or MongoDB task store instance based on configuration.", "scope": "", "scopeKind": ""}, {"name": "None __init__(self)", "scope": "InMemoryTasksStore", "scopeKind": "class", "description": "unavailable"}, {"name": "None __init__(self, db: AsyncIOMotorDatabase)", "scope": "MongoTasksStore", "scopeKind": "class", "description": "unavailable"}, {"name": "TaskOut create(self, payload: TaskCreate)", "scope": "MongoTasksStore", "scopeKind": "class", "description": "unavailable"}, {"name": "None delete(self, task_id: str)", "scope": "MongoTasksStore", "scopeKind": "class", "description": "unavailable"}, {"name": "None ensure_indexes(self)", "scope": "MongoTasksStore", "scopeKind": "class", "description": "unavailable"}, {"name": "TaskOut get(self, task_id: str)", "scope": "MongoTasksStore", "scopeKind": "class", "description": "unavailable"}, {"name": "List[TaskOut] list(self, limit: int, offset: int)", "scope": "MongoTasksStore", "scopeKind": "class", "description": "unavailable"}, {"name": "TaskOut update(self, task_id: str, payload: TaskUpdate)", "scope": "MongoTasksStore", "scopeKind": "class", "description": "unavailable"}], "calls": ["datetime.now", "TaskOut", "uuid.uuid4", "os.getenv", "self._col.create_index", "self._col.find", "self._col.find_one", "self._col.insert_one", "self._col.update_one", "self._col.delete_one"], "search-terms": ["tasks_repo", "MongoDB tasks store", "InMemoryTasksStore", "task CRUD", "tasks store selection"], "state": 2, "file_id": 7, "knowledge_revision": 33, "git_revision": "1db35c6467f53a9b7b9cbcc13eb52245bc06eaf6", "revision_history": [{"17": "24b8529fe183a1eac35239794bd6a7e6df0af895"}, {"33": "1db35c6467f53a9b7b9cbcc13eb52245bc06eaf6"}], "ctags": [{"_type": "tag", "name": "InMemoryTasksStore", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^class InMemoryTasksStore:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MongoTasksStore", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^class MongoTasksStore:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^    def __init__(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "InMemoryTasksStore", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^    def __init__(self, db: AsyncIOMotorDatabase) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, db: AsyncIOMotorDatabase)", "scope": "MongoTasksStore", "scopeKind": "class"}, {"_type": "tag", "name": "_in_memory_store", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^_in_memory_store = InMemoryTasksStore()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_now_utc", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^def _now_utc() -> datetime:$/", "language": "Python", "typeref": "typename:datetime", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_serialize_task", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^def _serialize_task(doc: Dict[str, Any]) -> TaskOut:$/", "language": "Python", "typeref": "typename:TaskOut", "kind": "function", "signature": "(doc: Dict[str, Any])"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^    async def create(self, payload: TaskCreate) -> TaskOut:$/", "language": "Python", "typeref": "typename:TaskOut", "kind": "member", "signature": "(self, payload: TaskCreate)", "scope": "InMemoryTasksStore", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^    async def create(self, payload: TaskCreate) -> TaskOut:$/", "language": "Python", "typeref": "typename:TaskOut", "kind": "member", "signature": "(self, payload: TaskCreate)", "scope": "MongoTasksStore", "scopeKind": "class"}, {"_type": "tag", "name": "delete", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^    async def delete(self, task_id: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, task_id: str)", "scope": "InMemoryTasksStore", "scopeKind": "class"}, {"_type": "tag", "name": "delete", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^    async def delete(self, task_id: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, task_id: str)", "scope": "MongoTasksStore", "scopeKind": "class"}, {"_type": "tag", "name": "ensure_indexes", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^    async def ensure_indexes(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "MongoTasksStore", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^    async def get(self, task_id: str) -> TaskOut:$/", "language": "Python", "typeref": "typename:TaskOut", "kind": "member", "signature": "(self, task_id: str)", "scope": "InMemoryTasksStore", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^    async def get(self, task_id: str) -> TaskOut:$/", "language": "Python", "typeref": "typename:TaskOut", "kind": "member", "signature": "(self, task_id: str)", "scope": "MongoTasksStore", "scopeKind": "class"}, {"_type": "tag", "name": "get_tasks_store", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^def get_tasks_store(db: Optional[AsyncIOMotorDatabase]) -> InMemoryTasksStore | MongoTasksStore:$/", "language": "Python", "typeref": "typename:InMemoryTasksStore|MongoTasksStore", "kind": "function", "signature": "(db: Optional[AsyncIOMotorDatabase])"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^    async def list(self, limit: int, offset: int) -> List[TaskOut]:$/", "language": "Python", "typeref": "typename:List[TaskOut]", "kind": "member", "signature": "(self, limit: int, offset: int)", "scope": "InMemoryTasksStore", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^    async def list(self, limit: int, offset: int) -> List[TaskOut]:$/", "language": "Python", "typeref": "typename:List[TaskOut]", "kind": "member", "signature": "(self, limit: int, offset: int)", "scope": "MongoTasksStore", "scopeKind": "class"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^    async def update(self, task_id: str, payload: TaskUpdate) -> TaskOut:$/", "language": "Python", "typeref": "typename:TaskOut", "kind": "member", "signature": "(self, task_id: str, payload: TaskUpdate)", "scope": "InMemoryTasksStore", "scopeKind": "class"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/fullstack-application-scaffold-7150-7159/expressjs_backend/src/api/repositories/tasks_repo.py", "pattern": "/^    async def update(self, task_id: str, payload: TaskUpdate) -> TaskOut:$/", "language": "Python", "typeref": "typename:TaskOut", "kind": "member", "signature": "(self, task_id: str, payload: TaskUpdate)", "scope": "MongoTasksStore", "scopeKind": "class"}], "hash": "8671065cc963ef9643ef24a6a25bac81", "format-version": 4, "code-base-name": "expressjs_backend", "filename": "expressjs_backend/src/api/repositories/tasks_repo.py", "fields": [{"name": "_in_memory_store = InMemoryTasksStore()", "scope": "", "scopeKind": "", "description": "unavailable"}]}